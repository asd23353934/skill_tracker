# è«‹æŠŠé€™æ®µä»£ç¢¼æ·»åŠ åˆ°ä½ çš„ network_manager.py æ–‡ä»¶æœ«å°¾
# æ‰¾åˆ°æ–‡ä»¶æœ€å¾Œä¸€è¡Œï¼Œåœ¨æœ€å¾Œé¢æ·»åŠ é€™äº›æ–¹æ³•

    def create_room_relay(self, player_name):
        """ä½¿ç”¨ä¸­ç¹¼ä¼ºæœå™¨å‰µå»ºæˆ¿é–“ï¼ˆ100% å…è¨­å®šï¼‰
        
        Args:
            player_name: ç©å®¶åç¨±
        
        Returns:
            æˆåŠŸè¿”å›æˆ¿é–“ä»£ç¢¼ï¼Œå¤±æ•—è¿”å› None
        """
        try:
            print("\n" + "="*60)
            print("ğŸŒ ä½¿ç”¨ä¸­ç¹¼ä¼ºæœå™¨æ¨¡å¼ï¼ˆå…è¨­å®šï¼‰")
            print("="*60)
            
            import random
            import string
            
            self.room_code = ''.join(random.choices(string.ascii_uppercase + string.digits, k=8))
            self.is_host = True
            self.use_relay = True
            
            print(f"\nğŸ”‘ æˆ¿é–“ä»£ç¢¼: {self.room_code}")
            print(f"ğŸ”— é€£ç·šåˆ°ä¸­ç¹¼ä¼ºæœå™¨...")
            
            from src.core.relay_client_http import RelayClientHTTP as RelayClient
            
            self.relay_client = RelayClient(
                self.room_code,
                player_name,
                self.skill_callback,
                self._on_members_update
            )
            
            if self.relay_client.connect():
                print(f"\nâœ… ä¸­ç¹¼æˆ¿é–“å‰µå»ºæˆåŠŸ")
                print(f"   æˆ¿é–“ä»£ç¢¼: {self.room_code}")
                print(f"   æ¨¡å¼: ä¸­ç¹¼ä¼ºæœå™¨ï¼ˆå…è¨­å®šï¼‰")
                print("="*60 + "\n")
                return self.room_code
            else:
                print(f"\nâŒ ä¸­ç¹¼ä¼ºæœå™¨é€£ç·šå¤±æ•—")
                return None
        except Exception as e:
            print(f"\nâŒ å‰µå»ºä¸­ç¹¼æˆ¿é–“å¤±æ•—: {e}")
            import traceback
            traceback.print_exc()
            return None
    
    def join_room_relay(self, room_code, player_name):
        """ä½¿ç”¨ä¸­ç¹¼ä¼ºæœå™¨åŠ å…¥æˆ¿é–“
        
        Args:
            room_code: æˆ¿é–“ä»£ç¢¼
            player_name: ç©å®¶åç¨±
        
        Returns:
            æˆåŠŸè¿”å› Trueï¼Œå¤±æ•—è¿”å› False
        """
        try:
            print(f"\nğŸ”— é€éä¸­ç¹¼ä¼ºæœå™¨åŠ å…¥: {room_code}")
            
            self.room_code = room_code
            self.is_host = False
            self.use_relay = True
            
            from src.core.relay_client_http import RelayClientHTTP as RelayClient
            
            self.relay_client = RelayClient(
                room_code,
                player_name,
                self.skill_callback,
                self._on_members_update
            )
            
            return self.relay_client.connect()
        except Exception as e:
            print(f"âŒ åŠ å…¥ä¸­ç¹¼æˆ¿é–“éŒ¯èª¤: {e}")
            import traceback
            traceback.print_exc()
            return False
